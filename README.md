# Knowledge Nexus ğŸ§ 

ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãŸã‚ã®ã€Œç¬¬2ã®è„³ã€ - AIãŒã‚ãªãŸã®çŸ¥è­˜ã‚’æ•´ç†ãƒ»æ§‹é€ åŒ–ã—ã€å­¦ç¿’ã‚’åŠ é€Ÿã•ã›ã¾ã™ã€‚

## âœ¨ ä¸»è¦æ©Ÿèƒ½

### ğŸ“š è¨˜äº‹ç®¡ç†
- **URLå…¥åŠ›**: Firecrawl APIã§è¨˜äº‹ã‚’è‡ªå‹•å–å¾—
- **AIè§£æ**: Gemini AIãŒè¨˜äº‹ã‚’è§£æã—ã€è¦ç´„ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ»å­¦ç¿’ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŠ½å‡º
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†**: new â†’ reading â†’ practice â†’ mastered ã®å­¦ç¿’ãƒ•ãƒ­ãƒ¼

### ğŸ“„ PDFãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†
- **PDFã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§PDFã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- **ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º**: PDF.jsã§è‡ªå‹•çš„ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡º
- **AIåˆ†æ**: ç« ã”ã¨ã®è¦ç´„ãƒ»é‡è¦ãƒã‚¤ãƒ³ãƒˆã®æŠ½å‡º
- **ã‚¹ãƒ—ãƒªãƒƒãƒˆãƒ“ãƒ¥ãƒ¼**: è¨˜äº‹è©³ç´°ã¨åŒã˜ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§å­¦ç¿’å¯èƒ½

### ğŸ¯ èƒ½å‹•çš„å­¦ç¿’
- **ã‚¯ã‚¤ã‚ºç”Ÿæˆ**: AIãŒè¨˜äº‹ãƒ»PDFå†…å®¹ã‹ã‚‰ç†è§£åº¦ãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•ç”Ÿæˆ
- **ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½**: ä¸æ­£è§£å•é¡Œã®ã¿ã‚’å†æŒ‘æˆ¦å¯èƒ½
- **æ•™ãˆã‚‹ãƒ¢ãƒ¼ãƒ‰**: AIã«æ•™ãˆã‚‹ã“ã¨ã§ç†è§£ã‚’æ·±ã‚ã‚‹
- **å­¦ç¿’ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ææ¡ˆ**: PDFã‹ã‚‰å…·ä½“çš„ãªå®Ÿè·µã‚¹ãƒ†ãƒƒãƒ—ã‚’ç”Ÿæˆ

### ğŸ§  Brainï¼ˆçŸ¥è­˜ãƒ™ãƒ¼ã‚¹ï¼‰
- **Markdownå½¢å¼**: æ§‹é€ åŒ–ã•ã‚ŒãŸçŸ¥è­˜ç®¡ç†
- **ãƒãƒ¼ã‚¸æ©Ÿèƒ½**: è¨˜äº‹ãƒ»PDFã®å†…å®¹ã‚’Brainã«çµ±åˆ
- **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**: AIãŒçŸ¥è­˜ã‚’æ•´ç†ãƒ»æœ€é©åŒ–
- **Brainçµ±åˆææ¡ˆ**: PDFã‚’ã©ã†Brainã«çµ±åˆã™ã¹ãã‹AIãŒææ¡ˆ

### ğŸ“ å­¦ç¿’ãƒ€ã‚¤ã‚¢ãƒªãƒ¼
- **æ—¥ã€…ã®è¨˜éŒ²**: å­¦ç¿’å†…å®¹ã‚’æ—¥è¨˜å½¢å¼ã§è¨˜éŒ²
- **å­¦ç¿’ãƒ„ã‚¤ãƒ¼ãƒˆ**: å­¦ã‚“ã ã“ã¨ã‚’140æ–‡å­—ã§è¦ç´„

### ğŸ”— ãƒŠãƒ¬ãƒƒã‚¸ã‚°ãƒ©ãƒ•
- **å¯è¦–åŒ–**: çŸ¥è­˜ã®é–¢é€£æ€§ã‚’ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚°ãƒ©ãƒ•ã§è¡¨ç¤º
- **ãƒˆãƒ¬ãƒ³ãƒ‰æ¤œå‡º**: å­¦ç¿’å‚¾å‘ã®åˆ†æ

### ğŸ” èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- **Google OAuth**: Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
- **GitHub OAuth**: GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
- **ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–**: Supabaseã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å¿…è¦æ¡ä»¶

- **Node.js** v18ä»¥ä¸Š
- **npm** ã¾ãŸã¯ **yarn**
- **Supabase ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ**ï¼ˆOAuthèªè¨¼ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆï¼‰
- **Gemini API Key** (å¿…é ˆ)
- **Firecrawl API Key** (è¨˜äº‹å–å¾—ç”¨)

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/KaitoS828/Knowledge-Nexus.git
cd Knowledge-Nexus
```

### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env.local` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ:

```env
# Gemini API Key (å¿…é ˆ)
VITE_GEMINI_API_KEY="your-gemini-api-key"

# Firecrawl API Key (è¨˜äº‹å–å¾—ç”¨)
VITE_FIRECRAWL_API_KEY="your-firecrawl-api-key"

# Supabase è¨­å®š (OAuthèªè¨¼ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯å¿…é ˆ)
VITE_SUPABASE_URL="https://your-project.supabase.co"
VITE_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

> **ğŸ’¡ ãƒ’ãƒ³ãƒˆ**: Viteã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€ã™ã¹ã¦ã®ç’°å¢ƒå¤‰æ•°ã« `VITE_` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãŒå¿…è¦ã§ã™

---

## ğŸ”‘ API Key ã®å–å¾—æ–¹æ³•

### Gemini API Key

1. [Google AI Studio](https://aistudio.google.com/) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒGet API Keyã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. æ–°ã—ã„APIã‚­ãƒ¼ã‚’ä½œæˆã—ã¦ã‚³ãƒ”ãƒ¼

### Firecrawl API Key

1. [Firecrawl](https://firecrawl.dev/) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ
3. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰APIã‚­ãƒ¼ã‚’å–å¾—

### Supabase è¨­å®š

1. [Supabase Dashboard](https://supabase.com/dashboard) ã«ã‚¢ã‚¯ã‚»ã‚¹
2. æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆï¼ˆã¾ãŸã¯æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠï¼‰
3. **Settings â†’ API** ã«ç§»å‹•
4. ä»¥ä¸‹ã®å€¤ã‚’ã‚³ãƒ”ãƒ¼:
   - **Project URL**: `https://xxxxx.supabase.co`
   - **anon (public)** ã‚­ãƒ¼: `eyJhbGciOi...` ã§å§‹ã¾ã‚‹JWTå½¢å¼

### OAuth ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®è¨­å®š

#### Google OAuth

1. [Google Cloud Console](https://console.cloud.google.com/) ã§æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
2. **APIs & Services â†’ OAuth consent screen** ã‚’è¨­å®š
3. **APIs & Services â†’ Credentials â†’ Create Credentials â†’ OAuth 2.0 Client ID** ã‚’ä½œæˆ
4. èªå¯ã•ã‚ŒãŸãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ URI ã«è¿½åŠ :
   ```
   https://your-project.supabase.co/auth/v1/callback
   ```
5. Supabase Dashboard â†’ **Authentication â†’ Providers â†’ Google** ã‚’æœ‰åŠ¹åŒ–
6. Google Cloud Console ã§å–å¾—ã—ãŸ **Client ID** ã¨ **Client Secret** ã‚’å…¥åŠ›

#### GitHub OAuth

1. GitHub â†’ **Settings â†’ Developer settings â†’ OAuth Apps â†’ New OAuth App**
2. Application name: `Knowledge Nexus`
3. Homepage URL: `http://localhost:5173` (é–‹ç™ºæ™‚)
4. Authorization callback URL:
   ```
   https://your-project.supabase.co/auth/v1/callback
   ```
5. Supabase Dashboard â†’ **Authentication â†’ Providers â†’ GitHub** ã‚’æœ‰åŠ¹åŒ–
6. GitHub ã§å–å¾—ã—ãŸ **Client ID** ã¨ **Client Secret** ã‚’å…¥åŠ›

---

## ğŸ–¥ï¸ ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œ

```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5173 ã‚’é–‹ãã¾ã™ã€‚

---

## ğŸ“¦ ãƒ“ãƒ«ãƒ‰

æœ¬ç•ªç”¨ãƒ“ãƒ«ãƒ‰ã‚’ä½œæˆ:

```bash
npm run build
```

ãƒ“ãƒ«ãƒ‰ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:

```bash
npm run preview
```

---

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ |
|---------|------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | React 19, TypeScript, Vite |
| ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° | Tailwind CSS |
| èªè¨¼ãƒ»DB | Supabase (PostgreSQL) |
| AI | Google Gemini API |
| PDFå‡¦ç† | PDF.js |
| è¨˜äº‹å–å¾— | Firecrawl API |
| ã‚¢ã‚¤ã‚³ãƒ³ | Lucide React |
| ã‚°ãƒ©ãƒ•å¯è¦–åŒ– | react-force-graph-2d |
| Markdown | react-markdown |

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
knowledge-nexus/
â”œâ”€â”€ components/              # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ ArticleDetail.tsx   # è¨˜äº‹è©³ç´°ï¼ˆã‚¹ãƒ—ãƒªãƒƒãƒˆãƒšã‚¤ãƒ³ï¼‰
â”‚   â”œâ”€â”€ ArticleList.tsx     # è¨˜äº‹ä¸€è¦§ï¼‹URL/PDFå…¥åŠ›
â”‚   â”œâ”€â”€ DocumentDetail.tsx  # PDFè©³ç´°ï¼ˆã‚¹ãƒ—ãƒªãƒƒãƒˆãƒšã‚¤ãƒ³ï¼‰
â”‚   â”œâ”€â”€ BrainEditor.tsx     # Brainç·¨é›†
â”‚   â”œâ”€â”€ KnowledgeGraph.tsx  # ãƒŠãƒ¬ãƒƒã‚¸ã‚°ãƒ©ãƒ•
â”‚   â”œâ”€â”€ LandingPage.tsx     # ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ LearningDiary.tsx   # å­¦ç¿’ãƒ€ã‚¤ã‚¢ãƒªãƒ¼
â”‚   â”œâ”€â”€ Onboarding.tsx      # ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
â”‚   â””â”€â”€ Sidebar.tsx         # ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ services/                # å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æº
â”‚   â”œâ”€â”€ geminiService.ts    # Gemini AIçµ±åˆ
â”‚   â”œâ”€â”€ pdfService.ts       # PDFå‡¦ç†
â”‚   â””â”€â”€ supabase.ts         # Supabase ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”œâ”€â”€ App.tsx                  # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ store.tsx                # çŠ¶æ…‹ç®¡ç† (Context API)
â”œâ”€â”€ types.ts                 # TypeScriptå‹å®šç¾©
â”œâ”€â”€ index.html               # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ vite.config.ts           # Viteè¨­å®š
â”œâ”€â”€ tailwind.config.js       # Tailwind CSSè¨­å®š
â”œâ”€â”€ .env.local               # ç’°å¢ƒå¤‰æ•° (gitignoreå¯¾è±¡)
â””â”€â”€ package.json
```

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### Supabase ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 

#### 1. users (èªè¨¼ãƒ†ãƒ¼ãƒ–ãƒ« - Supabase AuthãŒè‡ªå‹•ç®¡ç†)
Supabaseã®`auth.users`ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨

#### 2. brains
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ï¼ˆBrainï¼‰ã‚’ç®¡ç†

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ | åˆ¶ç´„ |
|---------|-----|------|------|
| id | uuid | ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ | PRIMARY KEY, DEFAULT uuid_generate_v4() |
| user_id | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | FOREIGN KEY â†’ auth.users(id), NOT NULL |
| content | text | Brainå†…å®¹ï¼ˆMarkdownï¼‰ | NOT NULL |
| last_refactored | timestamptz | æœ€çµ‚ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ—¥æ™‚ | DEFAULT now() |
| created_at | timestamptz | ä½œæˆæ—¥æ™‚ | DEFAULT now() |
| updated_at | timestamptz | æ›´æ–°æ—¥æ™‚ | DEFAULT now() |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `user_id` (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®é«˜é€Ÿæ¤œç´¢)

**RLS (Row Level Security):**
```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®Brainã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
CREATE POLICY "Users can CRUD their own brain"
ON brains FOR ALL
USING (auth.uid() = user_id);
```

#### 3. articles
è¨˜äº‹æƒ…å ±ã‚’ç®¡ç†

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ | åˆ¶ç´„ |
|---------|-----|------|------|
| id | uuid | ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ | PRIMARY KEY, DEFAULT uuid_generate_v4() |
| user_id | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | FOREIGN KEY â†’ auth.users(id), NOT NULL |
| title | text | è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ« | NOT NULL |
| url | text | å…ƒè¨˜äº‹URL | NOT NULL |
| content | text | è¨˜äº‹æœ¬æ–‡ | NOT NULL |
| summary | text | AIç”Ÿæˆè¦ç´„ | NOT NULL |
| tags | text[] | ã‚¿ã‚°é…åˆ— | DEFAULT '{}' |
| status | text | å­¦ç¿’ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | CHECK (status IN ('new', 'reading', 'practice', 'mastered')) |
| practice_guide | text | å®Ÿè·µã‚¬ã‚¤ãƒ‰ | |
| frequent_words | jsonb | é »å‡ºå˜èªï¼ˆJSONé…åˆ—ï¼‰ | |
| is_test_passed | boolean | ãƒ†ã‚¹ãƒˆåˆæ ¼ãƒ•ãƒ©ã‚° | DEFAULT false |
| added_at | timestamptz | è¿½åŠ æ—¥æ™‚ | DEFAULT now() |
| created_at | timestamptz | ä½œæˆæ—¥æ™‚ | DEFAULT now() |
| updated_at | timestamptz | æ›´æ–°æ—¥æ™‚ | DEFAULT now() |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `user_id` (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®è¨˜äº‹æ¤œç´¢)
- `status` (ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°)
- `added_at DESC` (æ–°ã—ã„é †ã‚½ãƒ¼ãƒˆ)

**RLS:**
```sql
CREATE POLICY "Users can CRUD their own articles"
ON articles FOR ALL
USING (auth.uid() = user_id);
```

#### 4. documents
PDFãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæƒ…å ±ã‚’ç®¡ç†

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ | åˆ¶ç´„ |
|---------|-----|------|------|
| id | uuid | ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ | PRIMARY KEY, DEFAULT uuid_generate_v4() |
| user_id | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | FOREIGN KEY â†’ auth.users(id), NOT NULL |
| name | text | ãƒ•ã‚¡ã‚¤ãƒ«å | NOT NULL |
| type | text | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¿ã‚¤ãƒ— | CHECK (type IN ('pdf', 'markdown', 'text')) |
| content | text | æŠ½å‡ºãƒ†ã‚­ã‚¹ãƒˆ | NOT NULL |
| summary | text | AIç”Ÿæˆè¦ç´„ | NOT NULL |
| key_points | text[] | é‡è¦ãƒã‚¤ãƒ³ãƒˆé…åˆ— | DEFAULT '{}' |
| chapters | jsonb | ç« ã”ã¨ã®æƒ…å ±ï¼ˆJSONï¼‰ | |
| file_size | integer | ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºï¼ˆãƒã‚¤ãƒˆï¼‰ | |
| added_at | timestamptz | è¿½åŠ æ—¥æ™‚ | DEFAULT now() |
| created_at | timestamptz | ä½œæˆæ—¥æ™‚ | DEFAULT now() |
| updated_at | timestamptz | æ›´æ–°æ—¥æ™‚ | DEFAULT now() |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `user_id` (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ¤œç´¢)
- `added_at DESC` (æ–°ã—ã„é †ã‚½ãƒ¼ãƒˆ)

**RLS:**
```sql
CREATE POLICY "Users can CRUD their own documents"
ON documents FOR ALL
USING (auth.uid() = user_id);
```

#### 5. diary_entries
å­¦ç¿’ãƒ€ã‚¤ã‚¢ãƒªãƒ¼ã‚¨ãƒ³ãƒˆãƒªã‚’ç®¡ç†

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ | åˆ¶ç´„ |
|---------|-----|------|------|
| id | uuid | ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ | PRIMARY KEY, DEFAULT uuid_generate_v4() |
| user_id | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | FOREIGN KEY â†’ auth.users(id), NOT NULL |
| content | text | ãƒ€ã‚¤ã‚¢ãƒªãƒ¼å†…å®¹ | NOT NULL |
| created_at | timestamptz | ä½œæˆæ—¥æ™‚ | DEFAULT now() |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `user_id, created_at DESC` (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®æ™‚ç³»åˆ—è¡¨ç¤º)

**RLS:**
```sql
CREATE POLICY "Users can CRUD their own diary entries"
ON diary_entries FOR ALL
USING (auth.uid() = user_id);
```

#### 6. learning_tweets
å­¦ç¿’ãƒ„ã‚¤ãƒ¼ãƒˆï¼ˆ140æ–‡å­—è¦ç´„ï¼‰ã‚’ç®¡ç†

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ | åˆ¶ç´„ |
|---------|-----|------|------|
| id | uuid | ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ | PRIMARY KEY, DEFAULT uuid_generate_v4() |
| user_id | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | FOREIGN KEY â†’ auth.users(id), NOT NULL |
| content | text | ãƒ„ã‚¤ãƒ¼ãƒˆå†…å®¹ | NOT NULL, CHECK (length(content) <= 140) |
| created_at | timestamptz | ä½œæˆæ—¥æ™‚ | DEFAULT now() |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `user_id, created_at DESC` (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®æ™‚ç³»åˆ—è¡¨ç¤º)

**RLS:**
```sql
CREATE POLICY "Users can CRUD their own tweets"
ON learning_tweets FOR ALL
USING (auth.uid() = user_id);
```

#### 7. bookmarks
ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯URLç®¡ç†

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ | åˆ¶ç´„ |
|---------|-----|------|------|
| id | uuid | ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ | PRIMARY KEY, DEFAULT uuid_generate_v4() |
| user_id | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | FOREIGN KEY â†’ auth.users(id), NOT NULL |
| url | text | ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯URL | NOT NULL |
| created_at | timestamptz | ä½œæˆæ—¥æ™‚ | DEFAULT now() |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `user_id` (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯æ¤œç´¢)

**RLS:**
```sql
CREATE POLICY "Users can CRUD their own bookmarks"
ON bookmarks FOR ALL
USING (auth.uid() = user_id);
```

#### 8. activity_logs
ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ­ã‚°ï¼ˆå­¦ç¿’ç¶™ç¶šè¨˜éŒ²ï¼‰

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ | åˆ¶ç´„ |
|---------|-----|------|------|
| id | uuid | ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ | PRIMARY KEY, DEFAULT uuid_generate_v4() |
| user_id | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID | FOREIGN KEY â†’ auth.users(id), NOT NULL |
| date | date | ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£æ—¥ä»˜ | NOT NULL |
| created_at | timestamptz | ä½œæˆæ—¥æ™‚ | DEFAULT now() |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `user_id, date DESC` (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®æ—¥ä»˜æ¤œç´¢)
- UNIQUEåˆ¶ç´„: `(user_id, date)` (1æ—¥1ãƒ¬ã‚³ãƒ¼ãƒ‰)

**RLS:**
```sql
CREATE POLICY "Users can CRUD their own activity logs"
ON activity_logs FOR ALL
USING (auth.uid() = user_id);
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ç”¨SQL

```sql
-- Enable UUID extension
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- Brains table
CREATE TABLE brains (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  content TEXT NOT NULL,
  last_refactored TIMESTAMPTZ DEFAULT now(),
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

CREATE INDEX idx_brains_user_id ON brains(user_id);

ALTER TABLE brains ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can CRUD their own brain"
ON brains FOR ALL
USING (auth.uid() = user_id);

-- Articles table
CREATE TABLE articles (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  title TEXT NOT NULL,
  url TEXT NOT NULL,
  content TEXT NOT NULL,
  summary TEXT NOT NULL,
  tags TEXT[] DEFAULT '{}',
  status TEXT CHECK (status IN ('new', 'reading', 'practice', 'mastered')) DEFAULT 'new',
  practice_guide TEXT,
  frequent_words JSONB,
  is_test_passed BOOLEAN DEFAULT false,
  added_at TIMESTAMPTZ DEFAULT now(),
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

CREATE INDEX idx_articles_user_id ON articles(user_id);
CREATE INDEX idx_articles_status ON articles(status);
CREATE INDEX idx_articles_added_at ON articles(added_at DESC);

ALTER TABLE articles ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can CRUD their own articles"
ON articles FOR ALL
USING (auth.uid() = user_id);

-- Documents table
CREATE TABLE documents (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  name TEXT NOT NULL,
  type TEXT CHECK (type IN ('pdf', 'markdown', 'text')) DEFAULT 'pdf',
  content TEXT NOT NULL,
  summary TEXT NOT NULL,
  key_points TEXT[] DEFAULT '{}',
  chapters JSONB,
  file_size INTEGER,
  added_at TIMESTAMPTZ DEFAULT now(),
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

CREATE INDEX idx_documents_user_id ON documents(user_id);
CREATE INDEX idx_documents_added_at ON documents(added_at DESC);

ALTER TABLE documents ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can CRUD their own documents"
ON documents FOR ALL
USING (auth.uid() = user_id);

-- Diary entries table
CREATE TABLE diary_entries (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  content TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT now()
);

CREATE INDEX idx_diary_entries_user_created ON diary_entries(user_id, created_at DESC);

ALTER TABLE diary_entries ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can CRUD their own diary entries"
ON diary_entries FOR ALL
USING (auth.uid() = user_id);

-- Learning tweets table
CREATE TABLE learning_tweets (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  content TEXT NOT NULL CHECK (length(content) <= 140),
  created_at TIMESTAMPTZ DEFAULT now()
);

CREATE INDEX idx_learning_tweets_user_created ON learning_tweets(user_id, created_at DESC);

ALTER TABLE learning_tweets ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can CRUD their own tweets"
ON learning_tweets FOR ALL
USING (auth.uid() = user_id);

-- Bookmarks table
CREATE TABLE bookmarks (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  url TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT now()
);

CREATE INDEX idx_bookmarks_user_id ON bookmarks(user_id);

ALTER TABLE bookmarks ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can CRUD their own bookmarks"
ON bookmarks FOR ALL
USING (auth.uid() = user_id);

-- Activity logs table
CREATE TABLE activity_logs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  date DATE NOT NULL,
  created_at TIMESTAMPTZ DEFAULT now(),
  UNIQUE(user_id, date)
);

CREATE INDEX idx_activity_logs_user_date ON activity_logs(user_id, date DESC);

ALTER TABLE activity_logs ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can CRUD their own activity logs"
ON activity_logs FOR ALL
USING (auth.uid() = user_id);

-- Triggers for updated_at
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = now();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_brains_updated_at BEFORE UPDATE ON brains
FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_articles_updated_at BEFORE UPDATE ON articles
FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

CREATE TRIGGER update_documents_updated_at BEFORE UPDATE ON documents
FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
```

---

## ğŸ¨ ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### ArticleDetail / DocumentDetail
- **ã‚¹ãƒ—ãƒªãƒƒãƒˆãƒšã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: ãƒªã‚µã‚¤ã‚ºå¯èƒ½ãªå·¦å³åˆ†å‰²
- **å·¦ãƒšã‚¤ãƒ³**: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤ºï¼ˆè¦ç´„ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã€æœ¬æ–‡ï¼‰
- **å³ãƒšã‚¤ãƒ³ä¸Šéƒ¨**: èƒ½å‹•çš„å­¦ç¿’ã‚¨ãƒªã‚¢ï¼ˆãƒ¡ãƒ¢ã€ã‚¯ã‚¤ã‚ºã€æ•™ãˆã‚‹ãƒ¢ãƒ¼ãƒ‰ï¼‰
- **å³ãƒšã‚¤ãƒ³ä¸‹éƒ¨**: AIãƒãƒ£ãƒƒãƒˆï¼ˆè¨˜äº‹ãƒãƒ£ãƒƒãƒˆ / ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ãƒ¢ãƒ¼ãƒ‰ï¼‰

### ArticleList
- **ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ**: URLã‹ã‚‰è¿½åŠ  / PDFã‹ã‚‰è¿½åŠ 
- **ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—**: PDFãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- **ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º**: è¨˜äº‹ã¨PDFã‚’çµ±åˆè¡¨ç¤º

### KnowledgeGraph
- **Force-directed graph**: çŸ¥è­˜ã®é–¢é€£æ€§ã‚’åŠ›å­¦ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§å¯è¦–åŒ–
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–**: ãƒãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°è¡¨ç¤º

---

## â“ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### OAuthèªè¨¼ãŒã†ã¾ãã„ã‹ãªã„

1. **Supabase Anon Key ã®å½¢å¼ã‚’ç¢ºèª**: `eyJhbGciOi...` ã§å§‹ã¾ã‚‹JWTå½¢å¼ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
2. **ç’°å¢ƒå¤‰æ•°ã®ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ç¢ºèª**: Viteã§ã¯ `VITE_` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãŒå¿…é ˆã§ã™
3. **Supabase ã§ OAuth Provider ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª**
4. **ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ URI ãŒæ­£ã—ã„ã‹ç¢ºèª**

### PDFã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼

1. **PDF.js Worker ã®ãƒ­ãƒ¼ãƒ‰ç¢ºèª**: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«404ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ç¢ºèª
2. **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™**: å¤§ãã™ãã‚‹PDFã¯ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
3. **APIã‚­ãƒ¼ç¢ºèª**: Gemini APIã‚­ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### ã€ŒInitialization failedã€ã‚¨ãƒ©ãƒ¼

1. Gemini API Key ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆ`VITE_GEMINI_API_KEY`ï¼‰
2. `.env.local` ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•: `npm run dev`

### ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„

1. Supabaseã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. RLSãƒãƒªã‚·ãƒ¼ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

---

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼å¤§ããªå¤‰æ›´ã®å ´åˆã¯ã€ã¾ãšissueã‚’é–‹ã„ã¦å¤‰æ›´å†…å®¹ã‚’è­°è«–ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“§ ãŠå•ã„åˆã‚ã›

- GitHub: [@KaitoS828](https://github.com/KaitoS828)
- Repository: [Knowledge-Nexus](https://github.com/KaitoS828/Knowledge-Nexus)

---

## ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯

- [Google AI Studio](https://aistudio.google.com/)
- [Supabase Documentation](https://supabase.com/docs)
- [Firecrawl API](https://firecrawl.dev/)
- [PDF.js](https://mozilla.github.io/pdf.js/)
- [Tailwind CSS](https://tailwindcss.com/)
